extends layout_publish
block content
   div(ng-app="Closingpage")
      div.container
         div.col-md-12.no-padding-left
            div.templates
               div.preview
                  div.row
                     div.col-md-12
                        div#cover-photo.document(back-img="{{ template['uploads']['coverImage']['source'] }}")
                  div.row.display-block
                        div.col-md-8
                           h2 Hey, {{ template['inputs']['Subject'] }}
                           p {{ template['inputs']['Main Description'] }}
                        div.col-md-4.text-center
                           div#logo.document(back-img="{{ template['uploads']['logo']['source'] }}")

                  div.row.display-block
                     div.row.text-center
                        h2 {{ template['inputs']['Template Title'] }}
                     div.row
                        div.col-md-8.col-md-offset-2.large-presentation
                           div.document.presentation.text-center
                              if template['uploads']['lrgDisplay']['display'] == 'ppt'
                                 ppt-display(slides="{{ template['uploads']['lrgDisplay']['source']}}")
                              if template['uploads']['lrgDisplay']['display'] == 'pdf'
                                 pdf-display(slides="{{ template['uploads']['lrgDisplay']['source']}}")
                              if template['uploads']['lrgDisplay']['display'] == 'gif'
                                 img(style="width:100%;height:100%" src="{{template['uploads']['medDisplayLeft']['source']}}")
                     div.row
                        div.col-md-8.text-center.col-md-offset-2
                           p {{ template['inputs']['Center Display Description'] }}
                     div.row.center-divider
                     div.row
                        div.col-md-6.medium-presentation
                           div.row
                              div.document.presentation.text-center
                                 if template['uploads']['medDisplayLeft']['display'] == 'ppt'
                                    ppt-display(slides="{{ template['uploads']['medDisplayLeft']['source']}}")
                                 if template['uploads']['medDisplayLeft']['display'] == 'pdf'
                                    pdf-display(slides="{{ template['uploads']['medDisplayLeft']['source']}}")
                                 if template['uploads']['medDisplayLeft']['display'] == 'gif'
                                    img(style="width:100%;height:100%" src="{{template['uploads']['medDisplayLeft']['source']}}")
                           div.row.text-center
                              p {{ template['inputs']['Left Display Description'] }}
                        div.col-md-6.medium-presentation
                           div.row
                              div.document.presentation.text-center
                                 if template['uploads']['medDisplayRight']['display'] == 'ppt'
                                    ppt-display(slides="{{ template['uploads']['medDisplayRight']['source']}}")
                                 if template['uploads']['medDisplayRight']['display'] == 'pdf'
                                    pdf-display(slides="{{ template['uploads']['medDisplayRight']['source']}}")
                                 if template['uploads']['medDisplayRight']['display'] == 'gif'
                                    img(style="width:100%;height:100%" src="{{template['uploads']['medDisplayRight']['source']}}")
                           div.row.text-center
                              p {{ template['inputs']['Right Display Description'] }}

                  div.row.display-block.bottom-border
                     div.jumbotron.text-center
                        h6 {{ template['inputs']['Quote'] }}
                  div.preview-footer.row
                     div.col-xs-4
                        div.footer-container.display-block.left
                           div.preview-footer
                              div.center
                                 img.sign.pull-left(src='{{user.picture_url}}')
                                 div.byline.pull-left
                                    span.row {{user.username}}
                                    span.row {{user.job_title}}
                                    span.row {{user.company}}
                     div.col-xs-4.text-center
                        div.footer-container.display-block.center(style="white-space: pre-line;") {{template['footer']['signature']}}
                     div.col-xs-4.text-center
                        div.footer-container.display-block.right.row
                           {% set size = 12//((1 if template['footer']['phone'] != '' else 0) + (1 if template['footer']['calendly'] != '' else 0) + (1 if template['footer']['email'] != '' else 0)) %}
                           {% if template['footer']['email'] != '' %}
                           div(class="col-xs-{{size}}") {# Jinja2 expressions don't work in Pug class lists #}
                              a.contact.contact-icon.email(href="mailto:{{ template['footer']['email'] }}")
                           {% endif %}
                           {% if template['footer']['calendly'] != '' %}
                           div(class="col-xs-{{size}}")
                              a.contact.contact-icon.calendly(href="{{ template['footer']['calendly'] }}")
                           {% endif %}
                           {% if template['footer']['phone'] != '' %}
                           div(class="col-xs-{{size}}")
                              a.contact.contact-icon.phone(href="tel:{{ template['footer']['phone'] }}", uib-tooltip="{{template['footer']['phone']}}", tooltip-append-to-body="true")
                           {% endif %}
